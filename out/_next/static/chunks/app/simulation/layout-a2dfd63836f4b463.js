(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[390],{9400:function(e,t,r){Promise.resolve().then(r.bind(r,2138)),Promise.resolve().then(r.bind(r,1627)),Promise.resolve().then(r.bind(r,7462))},2138:function(e,t,r){"use strict";r.d(t,{default:function(){return x}});var a=r(7437),n=r(2265),l=r(7462),i=r(1246),s=r(2391),o=e=>{let{side:t,leftChild:r,rightChild:l,flapStyles:i,containerStyles:o="",bothSides:d=!1}=e,c="right"===t,[u,g]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{g(!0)},[]),(0,a.jsxs)("div",{className:"relative w-full h-full",children:[(0,a.jsxs)("div",{className:"absolute inset-0 flex rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"w-[calc(50%-0.5px)] flex items-center justify-center",children:r}),(0,a.jsx)("div",{className:"w-px bg-light-background-tertiary dark:bg-dark-background-tertiary"}),(0,a.jsx)("div",{className:"w-[calc(50%-0.5px)] flex items-center justify-center",children:l})]}),(0,a.jsx)(s.E.div,{className:"absolute w-full top-0 h-full pointer-events-none",style:{transformStyle:"preserve-3d",perspective:"1000px"},initial:{rotateY:c?0:180},animate:{rotateY:c?0:180},transition:u?{type:"tween",ease:"easeInOut",duration:.7}:{duration:0},children:(0,a.jsx)("div",{className:"absolute w-[calc(50%-0.59px)] inset-0 h-full rounded-l-lg flex items-center justify-center overflow-hidden ".concat(i)})}),d&&(0,a.jsx)(s.E.div,{className:"absolute w-full top-0 h-full pointer-events-none",style:{transformStyle:"preserve-3d",perspective:"1000px"},initial:{rotateY:c?180:0},animate:{rotateY:c?180:0},transition:u?{type:"tween",ease:"easeInOut",duration:.7}:{duration:0},children:(0,a.jsx)("div",{className:"absolute w-[calc(50%-0.59px)] inset-0 h-full rounded-l-lg flex items-center justify-center overflow-hidden ".concat(i)})})]})};let d=e=>{let{value:t,onChange:r,onActivate:n,className:l,placeholder:i}=e;return(0,a.jsx)("input",{type:"number",value:null===t?"":t,onChange:e=>{let t=e.target.value?Number(e.target.value):null;r(t),null!==t&&n()},className:l,placeholder:i})},c=e=>{let{isAssigned:t,isNewRow:r,onChange:n}=e;return(0,a.jsx)("button",{onClick:n,className:"w-6 h-6 rounded-md duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-light-primary dark:focus:ring-dark-primary\n      ".concat(r?"bg-light-background-tertiary dark:bg-dark-background-tertiary":t?"bg-light-accent dark:bg-dark-accent":"bg-light-primary dark:bg-dark-primary"),"aria-label":t?"Treatment observed":"Control observed"})},u=e=>{let{row:t,index:r,updateCell:n,toggleAssignment:l,activateNewRow:s,deleteRow:u,isVisible:g,columnWidths:x}=e;if(!g)return null;let h=e=>{t.isNewRow&&s(e)};return(0,a.jsxs)("div",{className:"flex items-center space-x-2 py-2 transition-colors duration-200",children:[(0,a.jsx)("span",{className:"w-".concat(x.index," flex-shrink-0 text-center text-light-text-secondary dark:text-dark-text-secondary"),children:t.isNewRow?"":r+1}),(0,a.jsx)("div",{className:"flex-grow flex w-".concat(x.control," h-10 items-center space-x-2"),children:(0,a.jsx)(o,{side:0===t.assignment?"left":"right",leftChild:(0,a.jsx)(d,{value:t.control,onChange:e=>n(r,"control",e),onActivate:()=>h(0),className:"\n                w-full p-2 rounded-l-lg focus:outline-none focus:ring-none focus:ring-light-primary-dark dark:focus:ring-dark-primary-light \n                text-center transition-colors duration-200 bg-light-background-secondary dark:bg-dark-background-secondary text-light-text-secondary dark:text-dark-text-secondary\n                placeholder:text-light-text-tertiary dark:placeholder:text-dark-text-tertiary\n                [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none\n                inner-border-2 inner-border-light-primary dark:inner-border-dark-primary\n              ",placeholder:"Control"}),rightChild:(0,a.jsx)(d,{value:t.treatment,onChange:e=>n(r,"treatment",e),onActivate:()=>h(1),className:"\n                w-full p-2 rounded-r-lg focus:outline-none focus:ring-none focus:ring-light-primary-dark dark:focus:ring-dark-primary-light \n                text-center transition-colors duration-200 bg-light-background-secondary dark:bg-dark-background-secondary text-light-text-secondary dark:text-dark-text-secondary\n                placeholder:text-light-text-tertiary dark:placeholder:text-dark-text-tertiary\n                [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none\n                inner-border-2 inner-border-light-accent dark:inner-border-dark-accent\n              ",placeholder:"Treated"}),containerStyles:"\n    relative border-2 border-light-primary dark:border-dark-primary\n  ",flapStyles:"bg-gray-400/40 inner-border-2 inner-border-gray-500 dark:bg-gray-600/40 dark:inner-border-red",bothSides:t.isNewRow})}),(0,a.jsx)("div",{className:"w-".concat(x.assignment," flex-shrink-0"),children:(0,a.jsx)(c,{isAssigned:1===t.assignment,isNewRow:t.isNewRow||!1,onChange:()=>{t.isNewRow?s(0===t.assignment?1:0):l(r)}})}),!t.isNewRow&&(0,a.jsx)("button",{onClick:()=>u(r),className:"w-".concat(x.actions," flex-shrink-0 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-error dark:hover:text-dark-error focus:outline-none focus:ring-2 focus:ring-light-error dark:focus:ring-dark-error rounded-full p-1 transition-colors duration-200 flex justify-center"),"aria-label":"Remove row",children:(0,a.jsx)(i.pJ,{})}),t.isNewRow&&(0,a.jsx)("button",{onClick:()=>s(t.assignment),className:"w-".concat(x.actions," flex-shrink-0 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-success dark:hover:text-dark-success focus:outline-none focus:ring-2 focus:ring-light-success dark:focus:ring-dark-success rounded-full p-1 transition-colors duration-200 flex justify-center"),"aria-label":"Add row",children:(0,a.jsx)(i.dt,{})})]})};function g(e){let{children:t,content:r}=e;return(0,a.jsxs)("div",{className:"group relative inline-block",children:[t,(0,a.jsx)("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-light-background-tertiary dark:bg-dark-background-tertiary text-light-text-primary dark:text-dark-text-primary text-sm rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 ease-in-out whitespace-nowrap",children:r})]})}function x(){let{data:e,setData:t,toggleAssignment:r,updateCell:s,deleteRow:o,addRow:d,undo:c,redo:x,treatmentColumnName:p,controlColumnName:b,setTreatmentColumnName:v,setControlColumnName:y}=(0,l.N)(),w=(0,n.useRef)(null),[j,N]=(0,n.useState)(!1),[C,S]=(0,n.useState)(!1),[R,L]=(0,n.useState)(!1);(0,n.useEffect)(()=>{e.some(e=>e.isNewRow)||d()},[e,d]);let M=t=>{let r=e.filter(e=>!e.isNewRow&&e.assignment===("treatment"===t?1:0)).map(e=>e[t]).filter(e=>null!==e);return r.length>0?r.reduce((e,t)=>e+t,0)/r.length:0},E=(0,n.useCallback)(s,[s]),z=(0,n.useCallback)(r,[r]),T=(0,n.useCallback)(o,[o]),B=(0,n.useCallback)(t=>{let r=e.findIndex(e=>e.isNewRow);-1!==r&&E(r,t?"control":"treatment",t)},[e,E]),F=(e,t)=>{let r=t.target.value.slice(0,l.c2-("control"===e?10:0));"treatment"===e?v(r):y(r)},A=(0,n.useMemo)(()=>{let t=e.length<=3,r=e.map((r,n)=>(0,a.jsx)(u,{row:r,index:n,updateCell:E,toggleAssignment:z,activateNewRow:B,deleteRow:T,isVisible:t||!j||0===n||n===e.length-1,columnWidths:{index:"12",control:"40",treatment:"40",assignment:"12",actions:"12"}},n));if(j&&!t){let t=(0,a.jsx)("div",{className:"flex items-center justify-center h-12 cursor-pointer border-b border-light-background-tertiary dark:border-dark-background-tertiary",onClick:()=>N(!1),children:(0,a.jsxs)("button",{className:"flex items-center space-x-2 text-light-primary dark:text-dark-primary hover:text-light-primary-dark dark:hover:text-dark-primary-light focus:outline-none transition-colors duration-200",children:[(0,a.jsx)(i.Qq,{}),(0,a.jsxs)("span",{children:["Expand ",e.length-2," hidden rows"]})]})},"expand-button");r=[r[0],t,r[r.length-1]]}return r},[e,j,E,z,T,B]);return(0,a.jsxs)("div",{className:"w-full max-w-4xl mx-auto px-4 text-light-text-primary dark:text-dark-text-primary",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold",children:"Data"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(g,{content:"Undo (Cmd+Z / Ctrl+Z)",children:(0,a.jsx)(h,{onClick:c,icon:(0,a.jsx)(i.UE,{})})}),(0,a.jsx)(g,{content:"Redo (Cmd+Shift+Z / Ctrl+Y)",children:(0,a.jsx)(h,{onClick:x,icon:(0,a.jsx)(i.zG,{})})})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 py-3 bg-light-background-secondary dark:bg-dark-background-secondary border-b-2 border-light-primary dark:border-dark-primary rounded-t-lg",children:[(0,a.jsx)("span",{className:"w-12 flex-shrink-0 text-center font-medium",children:"#"}),(0,a.jsxs)("div",{className:"flex-grow flex items-center space-x-2",children:[(0,a.jsx)(m,{isEditing:R,value:b,onChange:e=>F("control",e),onBlur:()=>L(!1),onClick:()=>L(!0),isControl:!0}),(0,a.jsx)(m,{isEditing:C,value:p,onChange:e=>F("control",e),onBlur:()=>S(!1),onClick:()=>S(!0),isControl:!1}),(0,a.jsx)("span",{className:"w-10 text-center font-medium"})]}),(0,a.jsx)("span",{className:"w-12 flex-shrink-0"})]}),(0,a.jsx)("div",{className:"max-h-[60vh] overflow-y-auto bg-light-background dark:bg-dark-background rounded-b-lg divide-y divide-light-background-tertiary dark:divide-dark-background-tertiary",children:A}),(0,a.jsxs)("div",{className:"mt-4 flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-12 flex-shrink-0 text-right pr-2",children:(0,a.jsx)(g,{content:j?"Expand Rows":"Collapse Rows",children:(0,a.jsx)(h,{onClick:()=>N(!j),icon:j?(0,a.jsx)(i.Qq,{}):(0,a.jsx)(i.W5,{})})})}),(0,a.jsxs)("div",{className:"flex-grow flex items-center space-x-2",children:[(0,a.jsx)(k,{label:"Control",value:M("control")}),(0,a.jsx)(k,{label:"Treatment",value:M("treatment")}),(0,a.jsx)("span",{className:"w-10"})]}),(0,a.jsx)("span",{className:"w-12 flex-shrink-0"})]}),(0,a.jsx)(f,{onFill:r=>{t(e.map(e=>{if(e.isNewRow||null===e.control&&null===e.treatment)return e;let t=e.control,a=e.treatment;return null===e.control&&null!==e.treatment?t=e.treatment-r:null===e.treatment&&null!==e.control&&(a=e.control+r),{...e,treatment:a,control:t}}))}}),(0,a.jsxs)("div",{className:"mt-4 flex justify-center",children:[(0,a.jsx)("input",{type:"file",accept:".csv",onChange:e=>{var r;let a=null===(r=e.target.files)||void 0===r?void 0:r[0];if(a){let e=new FileReader;e.onload=e=>{var r;let a=null===(r=e.target)||void 0===r?void 0:r.result;"string"==typeof a&&t([...a.split("\n").map(e=>{let[t,r,a]=e.split(",").map(Number);return{control:isNaN(t)?null:t,treatment:isNaN(r)?null:r,assignment:1===a?1:0}}).filter(e=>null!==e.treatment||null!==e.control),(0,l.GT)()])},e.readAsText(a)}},ref:w,className:"hidden"}),(0,a.jsx)(h,{onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},icon:(0,a.jsx)(i.rG,{}),label:"Load from .csv",primary:!0})]})]})}let h=e=>{let{onClick:t,icon:r,label:n,primary:l=!1}=e;return(0,a.jsxs)("button",{onClick:t,className:"".concat("px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200 flex items-center space-x-2"," ").concat(l?"bg-light-primary dark:bg-dark-primary text-light-background dark:text-dark-background hover:bg-light-primary-dark dark:hover:bg-dark-primary-light focus:ring-light-primary-dark dark:focus:ring-dark-primary-light":"bg-light-secondary dark:bg-dark-secondary text-light-background dark:text-dark-background hover:bg-light-secondary-dark dark:hover:bg-dark-secondary-light focus:ring-light-secondary-dark dark:focus:ring-dark-secondary-light"),"aria-label":n||"button",children:[r,n&&(0,a.jsx)("span",{children:n})]})};function m(e){let{isEditing:t,value:r,onChange:n,onBlur:l,onClick:s,isControl:o}=e;return(0,a.jsx)("span",{className:"w-[calc(50%-20px)] text-center font-medium ".concat(o?"text-light-primary dark:text-dark-primary":"text-light-accent dark:text-dark-accent"," flex items-center justify-center"),children:t?(0,a.jsx)("input",{type:"text",value:r,onChange:e=>n(e),onBlur:l,className:"w-full bg-light-background dark:bg-dark-background text-light-text-primary dark:text-dark-text-primary text-center border-b-2 border-light-primary dark:border-dark-primary focus:outline-none",autoFocus:!0}):(0,a.jsx)(g,{content:"Click to edit column name",children:(0,a.jsxs)("span",{onClick:s,className:"cursor-pointer break-words flex items-center",children:[o&&"Control"!==r?"".concat(r," (Control)"):r,(0,a.jsx)(i.dY,{})]})})})}function k(e){let{label:t,value:r}=e;return(0,a.jsxs)("span",{className:"w-[calc(50%-20px)] text-center font-medium ".concat("Control"===t?"text-light-primary dark:text-dark-primary":"text-light-accent dark:text-dark-accent"," break-words"),children:["Avg: ",r.toFixed(2)]})}function f(e){let{onFill:t}=e,[r,l]=(0,n.useState)("0");return(0,a.jsxs)("div",{className:"mt-6 flex items-center space-x-4 bg-light-background-secondary dark:bg-dark-background-secondary py-4 px-3 rounded-lg",children:[(0,a.jsx)("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:"Treatment Effect Under Null:"}),(0,a.jsx)("input",{type:"number",value:r,onChange:e=>l(e.target.value),className:"w-12 px-1 py-1 border rounded focus:outline-none focus:ring-2 focus:ring-light-primary dark:focus:ring-dark-primary bg-light-background dark:bg-dark-background text-light-text-primary dark:text-dark-text-primary"}),(0,a.jsx)(g,{content:"Fill empty cells assuming this treatment effect",children:(0,a.jsxs)("button",{onClick:()=>{let e=parseFloat(r);isNaN(e)?alert("Please enter a valid number for the treatment effect."):t(e)},className:"flex items-center space-x-2 px-2 py-2 bg-light-primary dark:bg-dark-primary text-light-background dark:text-dark-background rounded-md hover:bg-light-primary-dark dark:hover:bg-dark-primary-light focus:outline-none focus:ring-2 focus:ring-light-primary-dark dark:focus:ring-dark-primary-light transition-colors duration-200",children:[(0,a.jsx)(i.$2,{}),(0,a.jsx)("span",{children:"Fill Empty Cells"})]})})]})}},1246:function(e,t,r){"use strict";r.d(t,{$2:function(){return x},NW:function(){return u},Qq:function(){return i},UE:function(){return n},W5:function(){return s},dY:function(){return h},dt:function(){return d},kL:function(){return c},pJ:function(){return o},rG:function(){return g},zG:function(){return l}});var a=r(7437);r(2265);let n=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),l=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M12.293 3.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 9H9a5 5 0 00-5 5v2a1 1 0 11-2 0v-2a7 7 0 017-7h5.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),i=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{d:"M5 10 L10 5 L15 10 M5 15 L10 20 L15 15"})}),s=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{d:"M5 5 L10 10 L15 5 M5 15 L10 10 L15 15"})}),o=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),d=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),c=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}),u=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}),g=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),x=()=>(0,a.jsx)("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),h=()=>(0,a.jsx)("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})},1627:function(e,t,r){"use strict";r.d(t,{default:function(){return d}});var a=r(7437),n=r(2265),l=r(7462),i=r(7818),s=r(630);let o=(0,i.default)(()=>Promise.all([r.e(934),r.e(29)]).then(r.bind(r,2008)),{loadableGenerated:{webpack:()=>[2008]},ssr:!1});function d(){let{data:e}=(0,l.N)(),{theme:t}=(0,s.F)(),[r,i]=(0,n.useState)(1e3),[d,c]=(0,n.useState)([]),[u,g]=(0,n.useState)(!1),[x,h]=(0,n.useState)(null),[m,k]=(0,n.useState)(0),[f,p]=(0,n.useState)(50),[b,v]=(0,n.useState)(0),y=(0,n.useRef)(null),w=(0,n.useRef)([]),j=(0,n.useRef)(50);(0,n.useEffect)(()=>{h(N(e,!0))},[e]),(0,n.useEffect)(()=>{j.current=f},[f]);let N=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0,a=0,n=0,l=0;return e.forEach(e=>{var i,s;!e.isNewRow&&(1===(t?e.assignment:.5>Math.random()?1:0)?(r+=null!==(i=e.treatment)&&void 0!==i?i:0,n++):(a+=null!==(s=e.control)&&void 0!==s?s:0,l++))}),(n>0?r/n:0)-(l>0?a/l:0)},[]),C=(0,n.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(u)return;g(!0),y.current=new AbortController;let a=y.current.signal,n=t?w.current:[],l=n.length+r;v(l);let i=Math.max(1,Math.floor(Math.sqrt(r)/10));(async()=>{try{let t=[...n],r=n.length;for(;r<l&&!a.aborted;){let a=N(e,!1);t.push(a),(++r%i==0||r===l)&&(w.current=t,c(t),k(r),await new Promise(e=>setTimeout(e,200-2*j.current)))}}catch(e){console.error("Simulation error:",e)}finally{g(!1)}})()},[e,r,N]),S=(0,n.useCallback)(()=>{y.current&&y.current.abort(),g(!1)},[]),R=(0,n.useCallback)(()=>{c([]),w.current=[],k(0),v(0)},[]),L=(0,n.useCallback)(()=>{u?S():R()},[u,S,R]),M=Math.min(...d,0)-1,E=Math.max(...d,0)+1,z=(E-M)/20,T=Array.from({length:21},(e,t)=>M+t*z),B=Math.max(...Object.values(T.slice(0,-1).reduce((e,t,r)=>{let a=T[r+1];return e[t]=d.filter(e=>e>=t&&e<a).length,e},{})),0),F=null!==x&&d.length>0?d.filter(e=>Math.abs(e)>=Math.abs(x)).length/d.length:null,A=e=>{let{title:t,value:r}=e;return(0,a.jsxs)("div",{className:"bg-light-background-secondary dark:bg-dark-background-tertiary p-3 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-light-text-secondary dark:text-dark-text-secondary mb-1",children:t}),(0,a.jsx)("p",{className:"text-m font-bold text-light-text-primary dark:text-dark-text-primary",children:r})]})};return(0,a.jsxs)("div",{className:"text-light-text-primary dark:text-dark-text-primary p-0",children:[(0,a.jsx)("div",{className:"mb-4",style:{width:"100%",height:"60vh"},children:(0,a.jsx)(o,{data:[{x:d,type:"histogram",marker:{color:"light"===t?"rgba(66, 135, 245, 0.6)":"rgba(102, 187, 255, 0.6)",line:{color:"light"===t?"rgba(66, 135, 245, 1)":"rgba(102, 187, 255, 1)",width:1}},xbins:{start:M,end:E,size:z},name:"Simulated Differences"},{x:[x,x],y:[0,B+1],type:"scatter",mode:"lines",line:{color:"light"===t?"rgba(255, 0, 0, 0.7)":"rgba(255, 102, 102, 0.7)",width:2},name:"Observed Difference"}],layout:{xaxis:{title:"Difference in Means",tickmode:"auto",nticks:10,tickfont:{color:"light"===t?"black":"white"},titlefont:{color:"light"===t?"black":"white"}},yaxis:{title:"Frequency",tickmode:"auto",nticks:10,tickfont:{color:"light"===t?"black":"white"},titlefont:{color:"light"===t?"black":"white"}},bargap:.05,showlegend:!0,legend:{x:.7,y:1,font:{color:"light"===t?"black":"white"}},paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",margin:{l:45,r:35,b:35,t:0},autosize:!0},config:{responsive:!0},style:{width:"100%",height:"100%"}})}),(0,a.jsxs)("div",{className:"p-4 bg-light-background-secondary dark:bg-dark-background-secondary rounded-lg",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[(0,a.jsxs)("div",{className:"w-full sm:w-auto flex items-center space-x-2",children:[(0,a.jsx)("label",{htmlFor:"numTrials",className:"font-semibold whitespace-nowrap",children:"Number of trials:"}),(0,a.jsx)("input",{id:"numTrials",type:"number",value:r,onChange:e=>i(Math.max(1,parseInt(e.target.value)||1)),className:"border rounded px-3 py-2 w-24 text-light-text-primary dark:text-dark-text-primary bg-light-background dark:bg-dark-background focus:outline-none focus:ring-2 focus:ring-light-primary dark:focus:ring-dark-primary"})]}),(0,a.jsxs)("div",{className:"w-full sm:flex-grow flex items-center space-x-2",children:[(0,a.jsx)("label",{htmlFor:"simulationSpeed",className:"font-semibold whitespace-nowrap",children:"Speed:"}),(0,a.jsx)("input",{id:"simulationSpeed",type:"range",min:"1",max:"100",value:f,onChange:e=>p(parseInt(e.target.value)),className:"w-full h-2 bg-light-background-tertiary dark:bg-dark-background-tertiary rounded-lg appearance-none cursor-pointer"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-left gap-2",children:[(0,a.jsx)("button",{onClick:()=>C(!1),disabled:u,className:"w-[calc(33.33%-0.5rem)] h-10 bg-light-primary dark:bg-dark-primary text-light-background dark:text-dark-background px-4 rounded hover:bg-light-primary-dark dark:hover:bg-dark-primary-light focus:outline-none focus:ring-2 focus:ring-light-primary-light dark:focus:ring-dark-primary-dark focus:ring-offset-2 disabled:bg-light-background-tertiary dark:disabled:bg-dark-background-tertiary disabled:text-light-text-tertiary dark:disabled:text-dark-text-tertiary",children:u?"Simulating...":"Simulate"}),d.length>0&&(0,a.jsx)("button",{onClick:()=>C(!0),disabled:u,className:"w-[calc(33.33%-0.5rem)] h-10 bg-light-secondary dark:bg-dark-secondary text-light-background dark:text-dark-background px-4 rounded hover:bg-light-secondary-dark dark:hover:bg-dark-secondary-light focus:outline-none focus:ring-2 focus:ring-light-secondary-light dark:focus:ring-dark-secondary-dark focus:ring-offset-2 disabled:bg-light-background-tertiary dark:disabled:bg-dark-background-tertiary disabled:text-light-text-tertiary dark:disabled:text-dark-text-tertiary",children:"Keep Simulating"}),(0,a.jsx)("button",{onClick:L,className:"w-[calc(33.33%-0.5rem)] h-10 px-4 rounded focus:outline-none focus:ring-2 focus:ring-offset-2 ".concat(u?"bg-light-error dark:bg-dark-error text-light-background dark:text-dark-background hover:bg-light-error-dark dark:hover:bg-dark-error-light focus:ring-light-error-light dark:focus:ring-dark-error-dark":"bg-light-background-tertiary dark:bg-dark-background-tertiary text-light-text-primary dark:text-dark-text-primary hover:bg-light-background-secondary dark:hover:bg-dark-background-secondary focus:ring-light-primary dark:focus:ring-dark-primary"),children:u?"Stop Simulating":"Clear"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-6",children:[(0,a.jsx)(A,{title:"Observed Statistic",value:null!==x?x.toFixed(4):"N/A"}),(0,a.jsx)(A,{title:"P-value",value:null!==F?F.toFixed(4):"N/A"}),(0,a.jsx)(A,{title:"Total Simulations",value:d.length}),(0,a.jsx)(A,{title:"Current Progress",value:u?"".concat(m," / ").concat(b):"Not running"})]})]})]})}},630:function(e,t,r){"use strict";r.d(t,{F:function(){return i},ThemeProvider:function(){return s}});var a=r(7437),n=r(2265);let l=(0,n.createContext)({theme:"dark",toggleTheme:()=>{}}),i=()=>(0,n.useContext)(l);function s(e){let{children:t}=e,[r,i]=(0,n.useState)("dark");return(0,n.useEffect)(()=>{let e=localStorage.getItem("theme");e&&i(e)},[]),(0,n.useEffect)(()=>{document.documentElement.classList.toggle("dark","dark"===r),localStorage.setItem("theme",r)},[r]),(0,a.jsx)(l.Provider,{value:{theme:r,toggleTheme:()=>{i(e=>"light"===e?"dark":"light")}},children:t})}},7462:function(e,t,r){"use strict";r.d(t,{GT:function(){return i},N:function(){return d},SimulationProvider:function(){return o},c2:function(){return s}});var a=r(7437),n=r(2265);let l=(0,n.createContext)(void 0),i=()=>({treatment:null,control:null,assignment:0,isNewRow:!0}),s=20;function o(e){let{children:t}=e,[r,s]=(0,n.useState)([i()]),[o,d]=(0,n.useState)([]),[c,u]=(0,n.useState)([]),[g,x]=(0,n.useState)("Treatment"),[h,m]=(0,n.useState)("Control"),k=(0,n.useCallback)(e=>{d(t=>[...t,e]),u([])},[]),f=(0,n.useCallback)(()=>{k(r),s(e=>[...e,i()])},[r,k]),p=(0,n.useCallback)(e=>{k(r),s(t=>t.filter((r,a)=>a!==e||t[a].isNewRow))},[r,k]),b=(0,n.useCallback)((e,t,a)=>{k(r),s(r=>{let n=[...r];return n[e]={...n[e],[t]:a},n[e].isNewRow&&null!==a&&(n[e].isNewRow=!1,n.push(i())),n})},[r,k]),v=(0,n.useCallback)(e=>{k(r),s(t=>{let r=[...t];return r[e]={...r[e],assignment:1===r[e].assignment?0:1},r})},[r,k]),y=(0,n.useCallback)(()=>{if(o.length>0){let e=o[o.length-1];d(e=>e.slice(0,-1)),u(e=>[r,...e]),s(e)}},[r,o]),w=(0,n.useCallback)(()=>{if(c.length>0){let e=c[0];u(e=>e.slice(1)),d(e=>[...e,r]),s(e)}},[r,c]),j=(0,n.useCallback)(e=>{k(r),s(e)},[r,k]);return(0,n.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&"z"===e.key&&(e.preventDefault(),e.shiftKey?w():y())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[y,w]),(0,a.jsx)(l.Provider,{value:{data:r,addRow:f,deleteRow:p,updateCell:b,setData:j,toggleAssignment:v,undo:y,redo:w,treatmentColumnName:g,controlColumnName:h,setTreatmentColumnName:x,setControlColumnName:m},children:t})}let d=()=>{let e=(0,n.useContext)(l);if(void 0===e)throw Error("useSimulationContext must be used within a SimulationProvider");return e}}},function(e){e.O(0,[313,971,23,744],function(){return e(e.s=9400)}),_N_E=e.O()}]);